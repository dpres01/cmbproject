{% set search = search %}
{% set category = cat %}
{% set titre = titres %}
{% set urgente = urgentes %}
{% extends 'base.html.twig' %}
{% block body %}
	<link rel="stylesheet" href="{{ asset('public/css/lister-annonce.css') }}" type="text/css"/>
	<link rel="stylesheet" href="{{ asset('public/css/button.css') }}" type="text/css"/>
	<div class="bg-cont-annonce">
		<div class="cont-annonce">
			<div class="annonce-l" style="">
				<div class="bx-filter" style="">
					<div class="btn-filter" style="text-align:right;">
						<i class="fa fa-sliders" aria-hidden="true" style="cursor:pointer;" onclick="shfilter();"></i>
					</div>
					<div id="filter-annonce" class="shfilter">
						<div style="font-weight:bold;">
							<div style="float:left;">Prix</div>
							<div style="float:left;margin:1px 0 0 6px;color:#337ab7;cursor:pointer;" onclick="filterPrice();">
								<i class="fa fa-chevron-circle-right" aria-hidden="true"></i>
							</div>
							<div style="clear:both;"></div>
						</div>
						<div class="filter-prix">
							<div style="float:left;">
								<input type="text" value="{{priceFrom}}" id="pr1" class="filter-prix-inp">
							</div>
							<div style="float:left;">&nbsp;-&nbsp;</div>
							<div style="float:left;">
								<input type="text" value="{{priceTo}}" id="pr2" class="filter-prix-inp">
							</div>
							<div style="clear:both;"></div>
						</div>
						<!--div class="filter-title">Catégories</div>
						<div style="font-size:13px;">
                                                      {#% for cle,catAnno in nbAnnoCat %}
							<div style="margin-top:5px;">
								<div class="filter-marg">
									{% if app.request.get('cat') == cle %}
										<span style="color:#000;">{{catAnno[0]}}</span>&nbsp;<span class="filter-nb ">({{catAnno[1]}})</span>
                                                                        {% else %}
										<a href="" onclick="filterAdd('cat', {{cle}});return false;">{{catAnno[0]}}</a>&nbsp;<span class="filter-nb ">({{catAnno[1]}})</span>
										<!--
                                                                                <a href="{#{path('annonces')}}?cat={{cle}}" onclick="/*filterAdd('cat', {#{cle}#});return false;*/">{#{catAnno[0]}}</a>&nbsp;<span class="filter-nb badge">{{catAnno[1]}#}</span>
                                                                                >
									{#% endif %}
								</div>
								<div style="clear:both;"></div>
							</div>
                                                        {%endfor%#}        
						</div-->
						<!--div class="filter-title">Villes</div>
						<div style="font-size:13px;">                                                 
                                                       {#% for cle,villeArray in nbAnnoByVille %}
                                                            <div style="margin-top:5px;">
                                                                    <div class="filter-marg">
                                                                        {% for k,nb in villeArray %}
                                                                            {% if app.request.get('vi') == cle %}
                                                                                    <span style="color:#000;">{{k}}</span>&nbsp;<span class="filter-nb ">({{nb}})</span>
                                                                            {% else %}
                                                                                    <a href="{{path('annonces')}}?vi={{cle}}" onclick="/*filterAdd('vi', {#{cle}#});return false;*/">{#{k}}</a>&nbsp;<span class="filter-nb ">({{nb}#})</span>
                                                                            {#% endif %}
                                                                        {% endfor %} 
                                                                    </div>
                                                                    <div style="clear:both;"></div>
                                                            </div>                
                                                       {% endfor %#}        							
						</div-->
						<div class="filter-title" style="display:none;">Types d'offres</div>
						<div style="font-size:13px;display:none;">
							<div style="margin-top:5px;">
								<div class="filter-marg">
									<a href="#">Offres <span class="filter-nb">(1 251)</span></a>
								</div>
								<div style="clear:both;"></div>
							</div>
							<div style="margin-top:5px;">
								<div class="filter-marg">
									<a href="#">Demandes <span class="filter-nb">(840)</span></a>
								</div>
								<div style="clear:both;"></div>
							</div>
						</div>
						<div style="margin:20px auto 0 auto;width:100%;max-width:136px;">
							<a href="/" class="myButton">Réinitialiser</a>
						</div>
					</div>
				</div>
			</div>

			<div class="annonce-r" style="">
				{% for val in annonces %}

					{% if loop.index == 1 %}
						{% set marg = 0 %}
					{% else %}
						{% set marg = 25 %}
					{% endif %}

					<div class="bxanon" style="margin-top:{{ marg }}px;height:100%;">
						<div class="bxanon-img">
							<a href="{{ path('afficher_annonce', {'generateurId': val.generateurId}) }}" class="lk-b">
							{%if zandoo_service_commun.testExistanceImg(val.images) %}
								  <img src="{{asset('public/uploads/documents/'~val.images[0].id~'.'~val.images[0].url)}}" class="mmax">
							{%else%}
								  <img src="{{ asset('public/img/nopic1.png')}}" class="imgmax">
							{%endif%}
							</a>
						</div>
						<div class="bx-txt">
							<div class="bx-title truncate">
								<a href="{{ path('afficher_annonce', {'generateurId': val.generateurId}) }}" class="lk-b">
									{{ zandoo_service_commun.titreFormatAnnonce(val.titre) }}
								</a>
							</div>
							<div class="bx-txt-nor">
								<div class="bx-txt-nor-price-box">
									<div class="bx-txt-nor-price">{{ val.prix }} {{ zandoo_service_commun.typeMonnaie(val.monnaie) }}</div>
									<div style="margin-top:15px;">
										<div class="bx-txt-nor-price-offer">
										    <a href="{{ path('afficher_annonce', {'generateurId': val.generateurId}) }}" class="lk-b">{%if val.type%}Voir demande{%else%}Voir offre{%endif%}</a>
										</div>
									</div>
									<div style="margin-top:15px;text-align:center;">
										{{ zandoo_service_commun.dateConvertText(val.dateCreation) }}
									</div>
								</div>
								<div style="float:left;width:350px;">
									<div style="font-size:13px;padding-top:5px;"><b>Description</b>:</div>
									<div style="margin-top:10px;">
										{{ val.description }}
									</div>
								</div>
								<div style="clear:both;"></div>
							</div>
							<div class="bx-txt-resp">
								<div class="bx-price-offer">
									<div class="bx-price">{{ val.prix }} {{ zandoo_service_commun.typeMonnaie(val.monnaie) }}</div>
									<div style="float:left;">
										<div class="bx-offer">
											<a href="{{ path('afficher_annonce', {'generateurId': val.generateurId}) }}" class="lk-b">
											{% if val.type %} Voir demande {%else%} Voir offre {%endif%}
											</a>
										</div>
									</div>
									<div style="clear:both;"></div>
								</div>
								<div class="tabgrd" style="">
									{{ val.description }}
								</div>
								<div class="bx-date" style="">
									{{ zandoo_service_commun.dateConvertText(val.dateCreation) }}
								</div>
							</div>
						</div>
						<div style="clear:both;"></div>
					</div>
				{% endfor %}			
                             {% include 'ZandooBundle:Commun:pagination.html.twig'%}                                 
			</div>
			<div style="clear:both;"></div>
                         </form> 
		</div>
	</div>                                                    
{% endblock %}
    
